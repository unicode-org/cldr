<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
<script src="./data/keyboard-data.js"></script>
<script src="./keyboard-chart.js"></script>
<link href="./keyboard-chart.css" rel="stylesheet">

<div id="app">
    <h1>CLDR LDML 3.0 Keyboard Browser</h1>
    <a href="https://cldr.unicode.org/index/keyboard-workgroup">CLDR Keyboard Workgroup</a>
    <!-- {{ message }} -->
    <hr/>
    <div>
        <span v-for="file of files" :key="file">
            <a :href="'#'+file">{{file}}</a> |
        </span>
    </div>
    <hr/>
    <ol>
        <li v-for="file of files" :key="file">
            <h2 :id="file"><code>{{file}}</code></h2>
            <ul>
                <li v-for="layers of getLayers(file)">
                    <h3 v-if="layers['@_form']">Form: {{ layers["@_form"] }}</h3>
                    <h3 v-if="layers['@_id']">ID: {{ layers["@_id"] }}</h3>
                    <h4 v-if="layers['@_minDeviceWidth']">minDeviceWidth: {{ layers["@_minDeviceWidth"] }}mm</h4>
                    <ul>
                        <li v-for="layer of layers.layer">
                            <h4 v-if="layer['@_modifier']">Modifier: {{ layer["@_modifier"] }}</h3>
                            <h4 v-if="layer['@_id']">{{ layer["@_id"] }}</h3>
                            <ol>
                                <div class="row" v-for="row of layer.row">
                                    <span class="key" v-for="key of row['@_keys'].split(' ')">
                                        {{key}}
                                    </span>
                                </div>
                            </ol>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ol>
</div>

<script>
  const { createApp } = Vue

  createApp({
    data() {
      return { 
        // message: 'Hello Vue!'
      }
    },
    computed: {
        files() {
            return Object.keys(_KeyboardData)
        },
        all() {
            return _KeyboardData;
        }
    },
    methods: {
        getLayers(id) {
            const q = _KeyboardData[id].keyboard.layers;
            if(!Array.isArray(q)) {
                return [q];
            } else {
                return q;
            }
        },
    },
  }).mount('#app')
</script>
