services:
  cldr-apps:
    build: .
    ports:
      - 9080
    volumes:
      - ../..:/srv/st/src/cldr:ro
    depends_on:
      - db
    links:
      - db
  db:
    image: mysql
    environment:
      MYSQL_RANDOM_ROOT_PASSWORD: yes
      MYSQL_USER: surveytool
      MYSQL_PASSWORD: surveytoolpw
      MYSQL_DATABASE: cldrdb
  webdriver:
    build: ../cldr-apps-webdriver
    depends_on:
      - cldr-apps
      - selenium
    links:
      - cldr-apps
      - selenium
    volumes:
      # cache these two
      - mavencache:/root/.m2
      - webdrivertarget:/workarea/target
  selenium:
    image: selenium/standalone-firefox:4.16.1
    shm_size: 2gb
    
volumes:
  mavencache:
  webdrivertarget:
